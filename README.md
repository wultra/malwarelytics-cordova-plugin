# Cordova Plugin for Malwarelytics

## How to install the plugin

### 1. Copy Malwarelytics native library

Copy `antivirus.aar` file into the plugins `plugin/src/android` folder.

### 2. Create a native configuration class

To provide credentials and custom configuration, you need to add a `java` or `kotlin` class inside your cordova aplication. This class needs to implement 2 methods (`getUserName` and `getPassword`) and needs to be `public`.

_TODO: explain what are styling methods_

Example class:

```java
package com.wultra.android.cordova.malwarelytics.demo;

public class MalwarelyticsConfig {

	// required methods

    public String getUserName() {
        return "MALWARELYTICS_USERNAME";
    }

    public String getPassword() {
        return "MALWARELYTICS_PASSWORD";
    }
    
    // optional methods
    
    public int getTheme() {
        return R.style.CustomAppTheme;
    }

    public int getNotificationIcon() {
        return R.mipmap.ic_launcher;
    }
}
```

### 3. Install the plugin into your app
```
cordova plugin add ../path/to/the/plugin"
```

### 4. Initialize and use the plugin

In your app `js` file, you can now access `window.plugins.malwarelytics` property.

Initialize the plugin with the absolute name (with package name) to your native (java or kotlin).

```javascript
window.plugins.malwarelytics.initialize({
        configJavaClass: "com.wultra.android.cordova.malwarelytics.demo.MalwarelyticsConfig",
        enableSilentMode: false
    }, function () {
        console.log("initialized");
    }, function (error) {
        console.log(error);
});
```

Call the scan:

```javascript
window.plugins.malwarelytics.triggerSmartProtection(function () {
        console.log("Smart Protection finished...");
    }, function (error) {
        console.log(error.type);
});
```

## Demo application tutorial

[Demo application tutorial](demoapp/README.md)