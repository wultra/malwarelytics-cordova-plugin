# Cordova Plugin for Malwarelytics

[![npm](https://img.shields.io/npm/v/cordova-plugin-malwarelytics)](https://www.npmjs.com/package/cordova-plugin-malwarelytics) ![license](https://img.shields.io/github/license/wultra/malwarelytics-cordova-plugin)

## How to install the plugin

### 1. Get Malwarelytics native SDK and credentials

The `.aar` SDK and credentials can be found under the "Get The SDK" section in the [Malwarelytics Console](https://app.malwarelytics.com).

### 2. Create the `malwarelytics.xml` file

Create the `malwarelytics.xml` file inside your app root folder with your app credentials and the path to the native library.

```xml
<?xml version='1.0' encoding='utf-8'?>
<malwarelytics>
    <!-- REQUIRED ITEMS -->
    <username>MALWARELYTICS_USERNAME</username>
    <password>MALWARELYTICS_PASSWORD</password>
    <library-path>./path/to/the/antivirus.aar</library-path>

    <!-- OPTIONAL ITEMS - more informations will be added later -->
    <!-- <theme></theme> -->
    <!-- <notification-icon></notification-icon> -->
</malwarelytics>
```

> PRO-TIP: Add malwarelytics.xml to your .gitignore file to ensure that the credentials are not leaked.

_TODO: explain what are styling methods_

### 3. Install the plugin into your app
#### For "vanilla" Cordova app
```sh
cordova plugin add cordova-plugin-malwarelytics
```
#### For Ionic Cordova app
```sh
ionic cordova plugin add cordova-plugin-malwarelytics
```

### 4. Initialize and use the plugin

In your app `js` file, you can now access `window.plugins.malwarelytics` property.

Initialize the plugin:

```javascript
window.plugins.malwarelytics.initialize({
        enableSilentMode: false
    }, function () {
        console.log("initialized");
    }, function (error) {
        console.log(error);
});
```

Call the scan:

```javascript
window.plugins.malwarelytics.triggerSmartProtection(function () {
        console.log("Smart Protection finished...");
    }, function (error) {
        console.log(error.type);
});
```

#### Typescript support

In case that you're using TypeScript to build the app, there is a `Malwarelytics.d.ts` definition file in the package. You can reference it in your file and use it as follow:

```typescript
/// <reference path="../../plugins/cordova-plugin-malwarelytics/www/MalwarelyticsPlugin.d.ts"/>

declare interface Window {
    plugins: {
        malwarelytics: MalwarelyticsPlugin;
        toast: any;
    }
}

// now you can use window.plugins.malwarelytics with autocompletion

```

## Support and Compatibility

|Cordova Library| Native Library |
|----------------|------------|
|`1.0.x`         | `0.11.x`    |