// This script will fix build.gradle file for android, which has wrong order of apply plugin commands.


var fs = require('fs');
var file = "platforms/android/app/build.gradle";
console.log(`Fixing gradle file: ${file}`)
fs.readFile(file, 'utf8', function (err,data) {
  
    if (err) {
        return console.log(err);
    }

    var result = data.replace(/apply plugin: \"kotlin-kapt\"\napply plugin: \"kotlin-android-extensions\"\napply plugin: \"kotlin-android\"/g, 'apply plugin: \"kotlin-android-extensions\"\napply plugin: \"kotlin-android\"\napply plugin: \"kotlin-kapt\"');

    fs.writeFile(file, result, 'utf8', function (err) {
        if (err) {
            return console.log(err); 
        } else {
            return console.log("gradle file fixed");
        }
    });
});