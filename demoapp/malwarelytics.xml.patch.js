
const fs = require("fs");
const xml2js = require("xml2js");

const file = "malwarelytics.xml";
const content = fs.readFileSync(file);

fs.writeFileSync(
    file, 
    content
        .toString()
        .replace("SERVICE_USERNAME", process.env.npm_config_susername)
        .replace("SERVICE_PASSWORD", process.env.npm_config_spassword)
        .replace("SERVICE_PUB_KEY", process.env.npm_config_spubkey)
        .replace("M2_USERNAME", process.env.npm_config_m2username)
        .replace("M2_PASSWORD", process.env.npm_config_m2password)
        .replace("M2_URL", process.env.npm_config_m2url)
        .replace("SERVICE_USERNAME_APPLE", process.env.npm_config_susernameapple)
        .replace("SERVICE_PASSWORD_APPLE", process.env.npm_config_spasswordapple)
        .replace("SERVICE_PUB_KEY_APPLE", process.env.npm_config_spubkeyapple)
        .replace("ARTIFACTORY_USERNAME", process.env.npm_config_afusername)
        .replace("ARTIFACTORY_PASSWORD", process.env.npm_config_afpassword)
        .replace("ARTIFACTORY_URL", process.env.npm_config_afurl)
    );