
const fs = require("fs");
const xml2js = require("xml2js");

const file = "malwarelytics.xml";
const content = fs.readFileSync(file);

console.log(content.toString());

fs.writeFileSync(
    file, 
    content
        .toString()
        .replace("SERVICE_USERNAME", process.env.npm_config_sUserName)
        .replace("SERVICE_PASSWORD", process.env.npm_config_sPassword)
        .replace("SERVICE_PUB_KEY", process.env.npm_config_sPubKey)
        .replace("M2_USERNAME", process.env.npm_config_m2UserName)
        .replace("M2_PASSWORD", process.env.npm_config_m2Password)
        .replace("M2_URL", process.env.npm_config_m2Url)
    );

const content2 = fs.readFileSync(file);
console.log(content2.toString());